<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation/1.19.3/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>

<script>
    // Custom validation methods
    $.validator.addMethod('cpf', function(value, element) {
        value = value.replace(/[^\d]+/g, '');
        if (value.length !== 11) return false;
        
        // Validação básica do CPF
        var Soma = 0;
        var Resto;
        
        if (value === "00000000000" || value === "11111111111" || 
            value === "22222222222" || value === "33333333333" || 
            value === "44444444444" || value === "55555555555" || 
            value === "66666666666" || value === "77777777777" || 
            value === "88888888888" || value === "99999999999") return false;
        
        for (i = 1; i <= 9; i++) Soma = Soma + parseInt(value.substring(i-1, i)) * (11 - i);
        Resto = (Soma * 10) % 11;
        
        if ((Resto === 10) || (Resto === 11)) Resto = 0;
        if (Resto !== parseInt(value.substring(9, 10))) return false;
        
        Soma = 0;
        for (i = 1; i <= 10; i++) Soma = Soma + parseInt(value.substring(i-1, i)) * (12 - i);
        Resto = (Soma * 10) % 11;
        
        if ((Resto === 10) || (Resto === 11)) Resto = 0;
        if (Resto !== parseInt(value.substring(10, 11))) return false;
        
        return true;
    }, 'Por favor, informe um CPF válido.');

    $.validator.addMethod('idadeMinima', function(value, element, params) {
        var dataNascimento = new Date(value);
        var hoje = new Date();
        var idade = hoje.getFullYear() - dataNascimento.getFullYear();
        var mes = hoje.getMonth() - dataNascimento.getMonth();
        
        if (mes < 0 || (mes === 0 && hoje.getDate() < dataNascimento.getDate())) {
            idade--;
        }
        
        return idade >= params;
    }, 'A idade mínima deve ser de {0} anos.');

    // Apply masks
    $(document).ready(function() {
        $('.cpf-mask').mask('000.000.000-00', { reverse: true });
        $('.date-mask').mask('00/00/0000');
        $('.phone-mask').mask('(00) 00000-0000');
        $('.cep-mask').mask('00000-000');
    });
</script>